export interface ICardInterface {
    label: string;
    suitNum: number;
    suitName: string;
    faceValue: number;
    image: string;
    shortName: string;
}

export const CARDS: ICardInterface[] = [
    {
        label: "Two of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 2,
        image: "2_of_clubs",
        shortName: "2c",
    },
    {
        label: "Three of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 3,
        image: "3_of_clubs",
        shortName: "3c",
    },
    {
        label: "Four of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 4,
        image: "4_of_clubs",
        shortName: "4c",
    },
    {
        label: "Five of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 5,
        image: "5_of_clubs",
        shortName: "5c",
    },
    {
        label: "Six of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 6,
        image: "6_of_clubs",
        shortName: "6c",
    },
    {
        label: "Seven of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 7,
        image: "7_of_clubs",
        shortName: "7c",
    },
    {
        label: "Eight of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 8,
        image: "8_of_clubs",
        shortName: "8c",
    },
    {
        label: "Nine of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 9,
        image: "9_of_clubs",
        shortName: "9c",
    },
    {
        label: "Ten of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 10,
        image: "10_of_clubs",
        shortName: "10c",
    },
    {
        label: "Jack of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 11,
        image: "jack_of_clubs",
        shortName: "jc",
    },
    {
        label: "Queen of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 12,
        image: "queen_of_clubs",
        shortName: "qc",
    },
    {
        label: "King of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 13,
        image: "king_of_clubs",
        shortName: "kc",
    },
    {
        label: "Ace of Clubs",
        suitNum: 1,
        suitName: "Club",
        faceValue: 14,
        image: "ace_of_clubs",
        shortName: "ac",
    },
    {
        label: "Two of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 2,
        image: "2_of_diamonds",
        shortName: "2d",
    },
    {
        label: "Three of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 3,
        image: "3_of_diamonds",
        shortName: "3d",
    },
    {
        label: "Four of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 4,
        image: "4_of_diamonds",
        shortName: "4d",
    },
    {
        label: "Five of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 5,
        image: "5_of_diamonds",
        shortName: "5d",
    },
    {
        label: "Six of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 6,
        image: "6_of_diamonds",
        shortName: "6d",
    },
    {
        label: "Seven of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 7,
        image: "7_of_diamonds",
        shortName: "7d",
    },
    {
        label: "Eight of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 8,
        image: "8_of_diamonds",
        shortName: "8d",
    },
    {
        label: "Nine of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 9,
        image: "9_of_diamonds",
        shortName: "9d",
    },
    {
        label: "Ten of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 10,
        image: "10_of_diamonds",
        shortName: "10d",
    },
    {
        label: "Jack of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 11,
        image: "jack_of_diamonds",
        shortName: "jd",
    },
    {
        label: "Queen of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 12,
        image: "queen_of_diamonds",
        shortName: "qd",
    },
    {
        label: "King of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 13,
        image: "king_of_diamonds",
        shortName: "kd",
    },
    {
        label: "Ace of Diamonds",
        suitNum: 2,
        suitName: "Diamond",
        faceValue: 14,
        image: "ace_of_diamonds",
        shortName: "ad",
    },
    {
        label: "Two of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 2,
        image: "2_of_hearts",
        shortName: "2h",
    },
    {
        label: "Three of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 3,
        image: "3_of_hearts",
        shortName: "3h",
    },
    {
        label: "Four of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 4,
        image: "4_of_hearts",
        shortName: "4h",
    },
    {
        label: "Five of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 5,
        image: "5_of_hearts",
        shortName: "5h",
    },
    {
        label: "Six of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 6,
        image: "6_of_hearts",
        shortName: "6h",
    },
    {
        label: "Seven of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 7,
        image: "7_of_hearts",
        shortName: "7h",
    },
    {
        label: "Eight of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 8,
        image: "8_of_hearts",
        shortName: "8h",
    },
    {
        label: "Nine of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 9,
        image: "9_of_hearts",
        shortName: "9h",
    },
    {
        label: "Ten of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 10,
        image: "10_of_hearts",
        shortName: "10h",
    },
    {
        label: "Jack of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 11,
        image: "jack_of_hearts",
        shortName: "jh",
    },
    {
        label: "Queen of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 12,
        image: "queen_of_hearts",
        shortName: "qh",
    },
    {
        label: "King of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 13,
        image: "king_of_hearts",
        shortName: "kh",
    },
    {
        label: "Ace of Hearts",
        suitNum: 3,
        suitName: "Heart",
        faceValue: 14,
        image: "ace_of_hearts",
        shortName: "ah",
    },
    {
        label: "Two of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 2,
        image: "2_of_spades",
        shortName: "2s",
    },
    {
        label: "Three of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 3,
        image: "3_of_spades",
        shortName: "3s",
    },
    {
        label: "Four of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 4,
        image: "4_of_spades",
        shortName: "4s",
    },
    {
        label: "Five of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 5,
        image: "5_of_spades",
        shortName: "5s",
    },
    {
        label: "Six of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 6,
        image: "6_of_spades",
        shortName: "6s",
    },
    {
        label: "Seven of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 7,
        image: "7_of_spades",
        shortName: "7s",
    },
    {
        label: "Eight of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 8,
        image: "8_of_spades",
        shortName: "8s",

    },
    {
        label: "Nine of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 9,
        image: "9_of_spades",
        shortName: "9s",
    },
    {
        label: "Ten of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 10,
        image: "10_of_spades",
        shortName: "10s",
    },
    {
        label: "Jack of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 11,
        image: "jack_of_spades",
        shortName: "js",
    },
    {
        label: "Queen of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 12,
        image: "queen_of_spades",
        shortName: "qs",
    },
    {
        label: "King of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 13,
        image: "king_of_spades",
        shortName: "ks",
    },
    {
        label: "Ace of Spades",
        suitNum: 4,
        suitName: "Spade",
        faceValue: 14,
        image: "ace_of_spades",
        shortName: "as",
    },
    {
        label: "Red Joker",
        suitNum: 5,
        suitName: "Red",
        faceValue: 16,
        image: "red_joker",
        shortName: "rj",
    },
    {
        label: "Black Joker",
        suitNum: 6,
        suitName: "Spade",
        faceValue: 16,
        image: "black_joker",
        shortName: "bj",
    },
    {
        label: "Red Joker #2",
        suitNum: 5,
        suitName: "Red",
        faceValue: 16,
        image: "red_joker",
        shortName: "rj2",
    },
    {
        label: "Black Joker #2",
        suitNum: 6,
        suitName: "Spade",
        faceValue: 16,
        image: "black_joker",
        shortName: "bj2",
    },
]

export function newDeck(
    shuffle: boolean = false,
    fourJokers: boolean = false,
): ICardInterface[] {
    let rv: ICardInterface[] = [];

    for( let card of CARDS ) {
        if( fourJokers || (card.shortName != "bj2" && card.shortName != "rj2") )  {
            rv.push( card );
        }

    }

    if( shuffle ) {
        rv = shuffleCards( rv );

        rv = shuffleCards( rv );

        rv = shuffleCards( rv );
    }

    return rv;
}

function shuffleCards(a: ICardInterface[]): ICardInterface[] {
    var j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
}

export function getCardTotalValue( cardFace: string ): number {
    let card = getCard( cardFace );
    return card.faceValue + (card.suitNum / 10);
}

export function getSuitValue( suitShort: string ): number {
    suitShort = suitShort.toLowerCase().trim();

    switch( suitShort ) {
        case "s":
        case "spade":
        case "spades": {
            return 4;
        }

        case "h":
        case "heart":
        case "hearts": {
            return 3;
        }

        case "d":
        case "diamond":
        case "diamonds": {
            return 2;
        }

        case "c":
        case "club":
        case "clubs": {
            return 1;
        }
    }
    return -1;
}

export function getCardValue( cardFace: string ): number {
    switch( cardFace.toLowerCase().trim() ) {
        case "j": {
            return 11;
        }
        case "q": {
            return 12;
        }
        case "k": {
            return 13;
        }
        case "a": {
            return 14;
        }
        default: {
            return +cardFace;
        }
    }
}
export function getCard( shortName: string ): ICardInterface | null {
    shortName = shortName.toLowerCase().trim();
    if( shortName ) {
        let cardSuit: number = 0;
        let cardValue: number = 0;

        if(
            shortName == "j"
            || shortName == "joker"
            || shortName == "jokers"
        ) {
            for( let card of CARDS ) {
                if(
                    card.shortName == "bj"
                ) {
                    return card;
                }
            }
        } else if( shortName == "bj" ) {
            for( let card of CARDS ) {
                if(
                    card.shortName == "bj"
                ) {
                    return card;
                }
            }
        } else if( shortName == "rj" ) {
            for( let card of CARDS ) {
                if(
                    card.shortName == "rj"
                ) {
                    return card;
                }
            }
        } else if( shortName == "bj2" ) {
            for( let card of CARDS ) {
                if(
                    card.shortName == "bj2"
                ) {
                    return card;
                }
            }
        } else if( shortName == "rj2" ) {
            for( let card of CARDS ) {
                if(
                    card.shortName == "rj2"
                ) {
                    return card;
                }
            }
        } else {
            if(
                shortName[0] == "c"
                    ||
                shortName[0] == "d"
                    ||
                shortName[0] == "h"
                    ||
                shortName[0] == "s"

            ) {
                // suit first, c9
                cardSuit = getSuitValue(shortName.substr( 0, 1) );
                cardValue = getCardValue(shortName.substr( 1 ) );

            } else {
                // number first, 10s
                cardSuit = getSuitValue(shortName.substr( -1) );
                cardValue = getCardValue( shortName.substr( 0, shortName.length -1 ) );
            }

            for( let card of CARDS ) {
                if(
                    cardSuit == card.suitNum
                        &&
                    +cardValue == card.faceValue
                ) {
                    return card;
                }
            }
        }
    }
    return null;
}

export function getBlankCardImage(): string {
    return "blank";
}

export function getBlankCard(): ICardInterface {
    return  {
        label: "Unknown Card",
        suitNum: 0,
        suitName: "Unknown",
        faceValue: 0,
        image: "blank",
        shortName: "blank",
    };
}